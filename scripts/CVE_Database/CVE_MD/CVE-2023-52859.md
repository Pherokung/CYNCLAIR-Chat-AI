CVE ID: CVE-2023-52859  
Title: perf: hisi: Fix use-after-free when register pmu fails  
Published Date: 2024-05-21T15:31:52.546Z  
Last Updated: 2024-08-02T23:11:36.049Z  
Affected Product: Linux  
Metrics and Score Level: Not provided  
Credit: Not provided  
Description: In the Linux kernel, the following vulnerability has been resolved: perf: hisi: Fix use-after-free when register pmu fails. When the uncore pmu registration fails, the pmu context may not be allocated. The error handling calls cpuhp_state_remove_instance() to call the uncore pmu offline callback, which migrates the pmu context, potentially leading to a use-after-free. The fix involves using cpuhp_state_remove_instance_nocalls() instead to prevent notifiers from executing after the PMU device registration failure.